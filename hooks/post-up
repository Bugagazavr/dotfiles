#!/bin/sh

source ~/.dotfiles/zshrc

if [ -s ~/.nvimrc ]; then
	echo "unlink your ~/.nvimrc"
	unlink ~/.nvimrc
else
	if [ -f ~/.nvimrc ]; then
		mv ~/.nvimrc ~/.nvimrc.backup
	fi
fi

if [ -s ~/.nvim ]; then
	echo "unlink your ~/.nvim"
	unlink ~/.nvim
else
	if [ -d ~/.nvim ]; then
		mv ~/.nvim ~/.nvim.backup 
	fi
fi

ln -sv ~/.vimrc ~/.nvimrc 
ln -sv ~/.vim  ~/.nvim

if hash git 2>/dev/null; then
	if [[ ! -d ~/.vim/bundle/Vundle.vim ]]; then 
		mkdir -p ~/.vim/bundle
		git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
	fi

	$EDITOR -c "execute \"PluginInstall\" | qa"
	cd ~/.vim/bundle/YouCompleteMe
	./install.sh --clang-completer --gocode-completer
fi

cp ~/.dotfiles/com.googlecode.iterm2.plist ~/Library/Preferences/
